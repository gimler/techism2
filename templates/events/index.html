{% extends "base.html" %}
{% block content %}
<section id="content">
  {% if latest_event_list %}
      {% for event in latest_event_list.object_list %} 
		<article class="event">
			<header>
				<h2><a href="/events/{{ event.id }}/">{{ event.title }}</a></h2>
				<span id="shortdate">{{ event.dateBegin }}</span>
			</header>  

            <section class="detail">
				Beginn: {{ event.dateBegin }}<br>
            	Url: <a href="{{ event.url }}">{{ event.url }}</a><br>
            	Beschreibung: {{ event.description }}<br>
            	Tags: {{ event.tags|default_if_none:""|join:", " }}<br>
            	Veranstaltungsort: {{event.location.name}}
            	{{event.location.street}}
            	{{event.location.city}}
            	{% if event.location.latitude and event.location.longitude %}
            	  <div id="map_canvas" style="height: 400px; width: 600px"></div>
            	{% endif %}
			</section>
			
		</article>
      {% endfor %}

	  {% if user.is_authenticated %}
		<article>
			<header>
				<h2><a href="/events/create">Event hinzufügen</a></h2>
			</header>  
		</article>
	  {% endif %}

  {% else %}
      <p>No events are available.</p>
  {% endif %}  

</section>  
  
  <div class="clear_left"/>
  
  <div class="pagination">
    <span class="step-links">
        {% if latest_event_list.has_previous %}
            <a href="?page={{ latest_event_list.previous_page_number }}">vorherige</a>
        {% endif %}

        <span class="current">
            Seite {{ latest_event_list.number }} von {{ latest_event_list.paginator.num_pages }}
        </span>

        {% if latest_event_list.has_next %}
            <a href="?page={{ latest_event_list.next_page_number }}">nächste</a>
        {% endif %}
    </span>
  </div>
  
  {% if user.is_authenticated %}
    <a href="/events/create">neues Event anlegen</a><br><br>
  {% endif %}
  <a href="/events/archive">Vergangene Veranstaltungen</a><br><br>
  
  <!--div class="tag_cloud" id="tagcloud">
    Tag Cloud
    <ul >
      {% for tag,count in tags.items %}
      <li value="{{ count }}"><a href="/events/tags/{{ tag }}/">{{ tag }}</a> </li> 
      {% endfor %}
    </ul
  </div-->
{% endblock %}

{% block scripts %}  
  <script type="text/javascript" src="/static/jquery/js/jquery-tagcloud-0.5.0.min.js"></script> 
  <script type="text/javascript" src="/static/jquery/js/jquery-tinysort-1.0.1.min.js"></script> 
  <script type="text/javascript">
$(function(){
  $("#tagcloud>ul").tagcloud({type:"list",colormin:"2FF21D",colormax:"2FF21D"}).find("li").tsort();
});
  </script>
{% endblock %}
