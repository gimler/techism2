{% extends "base.html" %}
{% block content %}
<section id="content">
  {% if event_list %}
      {% for event in event_list.object_list %} 
		<article class="event">
			<header>
				<h2><a href="/events/{{ event.id }}/">{{ event.title }}</a></h2>
				<span id="shortdate">{{ event.dateBegin }}</span>
			</header>  

            <section class="detail">
	            <h3>Was</h3>
					<section id="description">{{ event.description }}</section>            		
					<section id="url"><a href="{{ event.url }}">{{ event.url }}</a></section>
            		<section id="tags">{{ event.tags|default_if_none:""|join:", " }}</section>
	            <h3>Wann</h3>
				<section id="begin">{{ event.dateBegin }}</section>
	            <h3>Wo</h3>
            	Veranstaltungsort: 
				<section id="location">{{event.location.name}}</section>  
            	{% if event.location.latitude and event.location.longitude %}
				<img src="http://maps.google.com/maps/api/staticmap?size=500x200&markers=icon:http://chart.apis.google.com/chart%3Fchst%3Dd_map_pin_icon%26chld%3Dcafe%257C996600|224+West+20th+Street|75+9th+Ave|700+E+9th+St&sensor=true" style="height:auto;width:100%;"/>
				{% endif %}
			</section>                
			
		</article>
      {% endfor %}

  {% else %}
      <p>No events are available.</p>
  {% endif %}  

</section>   
  
  <div class="pagination">
    <span class="step-links">
        {% if event_list.has_previous %}
            <a href="?page={{ event_list.previous_page_number }}">vorherige</a>
        {% endif %}

        <span class="current">
            Seite {{ event_list.number }} von {{ event_list.paginator.num_pages }}
        </span>

        {% if event_list.has_next %}
            <a href="?page={{ event_list.next_page_number }}">n√§chste</a>
        {% endif %}
    </span>
  </div>
  
  <!--div class="tag_cloud" id="tagcloud">
    Tag Cloud
    <ul >
      {% for tag,count in tags.items %}
      <li value="{{ count }}"><a href="/events/tags/{{ tag }}/">{{ tag }}</a> </li> 
      {% endfor %}
    </ul
  </div-->
{% endblock %}

{% block scripts %}  
  <script type="text/javascript" src="/static/jquery/js/jquery-tagcloud-0.5.0.min.js"></script> 
  <script type="text/javascript" src="/static/jquery/js/jquery-tinysort-1.0.1.min.js"></script> 
  <script type="text/javascript">
$(function(){
  $("#tagcloud>ul").tagcloud({type:"list",colormin:"2FF21D",colormax:"2FF21D"}).find("li").tsort();
});
  </script>
{% endblock %}
